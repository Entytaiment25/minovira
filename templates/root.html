<!DOCTYPE html>
<html lang="en">
  <head>
    <title>{% block title %}{{ title }}{% endblock %}</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link href="/output.css" rel="stylesheet" />
    <script src="/htmx.min.js"></script>
    <script>
      window.setActiveFile = (el, file) => {
        document.querySelectorAll('.file-item').forEach(i => i.classList.remove('file-selected'));
        el?.classList.add('file-selected');
        document.querySelector('.tab-current-file')?.textContent = file;
      };
      document.addEventListener('DOMContentLoaded', () => {
        const defaultFile = document.querySelector('[data-file="readme"]');
        defaultFile && setActiveFile(defaultFile, 'README.md');
      });
    </script>
  </head>

  <body class="text-gray-800 font-mono text-sm bg-white">
    <div class="h-screen flex overflow-hidden">
      <!-- File Explorer Sidebar -->
      <div
        class="bg-gray-50 border-r border-gray-300 w-64 sm:w-72 lg:w-80 xl:w-96 flex flex-col flex-shrink-0"
      >
        <!-- Header -->
        <div
          class="bg-gray-200 border-b border-gray-300 px-4 py-2 text-xs font-semibold text-gray-700"
        >
          EXPLORER
        </div>

        <!-- File Tree -->
        <div class="flex-1 p-2 overflow-y-auto">
          <!-- Workspace Folder -->
          <div class="mb-2">
            <div
              class="flex items-center text-xs font-semibold text-gray-600 mb-1"
            >
              <span class="mr-1">‚ñº</span>
              <span>KNOWLEDGE_INDEX</span>
            </div>

            <!-- Documents Folder -->
            <div class="ml-3">
              <div class="flex items-center text-xs text-gray-600 mb-1">
                <span class="mr-1">‚ñº</span>
                <span class="font-medium">üìÅ docs/</span>
              </div>

              <!-- Document Files -->
              <div class="ml-4 space-y-1">
                <div
                  class="file-item flex items-center text-xs hover:bg-purple-100 px-1 py-0.5 rounded cursor-pointer group"
                  data-file="readme"
                  hx-get="/welcome"
                  hx-trigger="click"
                  hx-target="#content"
                  hx-swap="innerHTML"
                  onclick="setActiveFile(this, 'README.md')"
                >
                  <span class="mr-2">üìÑ</span>
                  <span class="group-hover:text-purple-700">README.md</span>
                </div>

                <div
                  class="file-item flex items-center text-xs hover:bg-purple-100 px-1 py-0.5 rounded cursor-pointer group"
                  data-file="introduction"
                  hx-get="/note/1"
                  hx-trigger="click"
                  hx-target="#content"
                  hx-swap="innerHTML"
                  onclick="setActiveFile(this, 'introduction.md')"
                >
                  <span class="mr-2">üìÑ</span>
                  <span class="group-hover:text-purple-700"
                    >introduction.md</span
                  >
                </div>

                <div
                  class="file-item flex items-center text-xs hover:bg-purple-100 px-1 py-0.5 rounded cursor-pointer group"
                  data-file="features"
                  hx-get="/note/2"
                  hx-trigger="click"
                  hx-target="#content"
                  hx-swap="innerHTML"
                  onclick="setActiveFile(this, 'features.md')"
                >
                  <span class="mr-2">üìÑ</span>
                  <span class="group-hover:text-purple-700">features.md</span>
                </div>

                <div
                  class="file-item flex items-center text-xs hover:bg-purple-100 px-1 py-0.5 rounded cursor-pointer group"
                  data-file="data"
                  hx-get="/note/3"
                  hx-trigger="click"
                  hx-target="#content"
                  hx-swap="innerHTML"
                  onclick="setActiveFile(this, 'data.md')"
                >
                  <span class="mr-2">üìÑ</span>
                  <span class="group-hover:text-purple-700">data.md</span>
                </div>

                <div
                  class="file-item flex items-center text-xs hover:bg-purple-100 px-1 py-0.5 rounded cursor-pointer group"
                  data-file="getting-started"
                  hx-get="/note/4"
                  hx-trigger="click"
                  hx-target="#content"
                  hx-swap="innerHTML"
                  onclick="setActiveFile(this, 'getting-started.md')"
                >
                  <span class="mr-2">üìÑ</span>
                  <span class="group-hover:text-purple-700"
                    >getting-started.md</span
                  >
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Status Bar -->
        <div
          class="bg-gray-50 text-gray-800 text-xs px-4 py-1 flex items-center justify-between"
        >
          <span>markdown</span>
          <span>4 files</span>
        </div>
      </div>

      <!-- Main Editor Area -->
      <div class="flex-1 flex flex-col min-w-0">
        <!-- Tab Bar -->
        <div
          class="bg-gray-100 border-b border-gray-300 px-4 py-1 text-xs flex-shrink-0"
        >
          <div
            class="bg-white border border-gray-300 px-3 py-1 inline-block rounded-t"
          >
            <span class="text-gray-700 tab-current-file">README.md</span>
          </div>
        </div>

        <!-- Content Area -->
        <div
          id="content"
          class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto bg-white"
        >
          {% block content %}
          <div
            class="h-full flex flex-col items-center justify-center text-center max-w-5xl mx-auto"
          >
            <!-- Welcome Hero -->
            <div class="mb-8 lg:mb-12">
              <h1
                class="text-3xl sm:text-4xl lg:text-5xl font-light text-gray-800 mb-3 lg:mb-4 font-sans"
              >
                Minovira
              </h1>
              <p class="text-lg sm:text-xl text-gray-500 font-light">
                {{ myownvalue }}
              </p>
            </div>

            <!-- Quick Access Grid -->
            <div
              class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8 mb-8 lg:mb-12 w-full"
            >
              <div
                class="group bg-white border border-gray-200 rounded-lg p-4 sm:p-6 lg:p-8 hover:shadow-lg hover:border-gray-300 transition-all duration-300 cursor-pointer"
                hx-get="/note/2"
                hx-trigger="click"
                hx-target="#content"
                hx-swap="innerHTML"
                onclick="setActiveFile(document.querySelector('[data-file=features]'), 'features.md')"
              >
                <div
                  class="text-3xl lg:text-4xl mb-3 lg:mb-4 group-hover:scale-110 transition-transform"
                >
                  ‚ö°
                </div>
                <h3 class="text-lg lg:text-xl font-semibold text-gray-800 mb-2">
                  Features
                </h3>
                <p class="text-sm lg:text-base text-gray-600">
                  Explore advanced capabilities
                </p>
              </div>

              <div
                class="group bg-white border border-gray-200 rounded-lg p-4 sm:p-6 lg:p-8 hover:shadow-lg hover:border-gray-300 transition-all duration-300 cursor-pointer"
                hx-get="/note/3"
                hx-trigger="click"
                hx-target="#content"
                hx-swap="innerHTML"
                onclick="setActiveFile(document.querySelector('[data-file=data]'), 'data.md')"
              >
                <div
                  class="text-3xl lg:text-4xl mb-3 lg:mb-4 group-hover:scale-110 transition-transform"
                >
                  üìä
                </div>
                <h3 class="text-lg lg:text-xl font-semibold text-gray-800 mb-2">
                  Data
                </h3>
                <p class="text-sm lg:text-base text-gray-600">
                  Visualize information
                </p>
              </div>

              <div
                class="group bg-white border border-gray-200 rounded-lg p-4 sm:p-6 lg:p-8 hover:shadow-lg hover:border-gray-300 transition-all duration-300 cursor-pointer"
                hx-get="/note/4"
                hx-trigger="click"
                hx-target="#content"
                hx-swap="innerHTML"
                onclick="setActiveFile(document.querySelector('[data-file=getting-started]'), 'getting-started.md')"
              >
                <div
                  class="text-3xl lg:text-4xl mb-3 lg:mb-4 group-hover:scale-110 transition-transform"
                >
                  üöÄ
                </div>
                <h3 class="text-lg lg:text-xl font-semibold text-gray-800 mb-2">
                  Getting Started
                </h3>
                <p class="text-sm lg:text-base text-gray-600">
                  Dynamic loading example
                </p>
              </div>
            </div>

            <!-- Stats Footer -->
            <div
              class="flex flex-wrap items-center justify-center gap-4 sm:gap-8 text-sm text-gray-400"
            >
              <div class="flex items-center">
                <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                <span>4 Documents</span>
              </div>
              <div class="flex items-center">
                <div class="w-2 h-2 bg-purple-400 rounded-full mr-2"></div>
                <span>{{ testvalue }}</span>
              </div>
              <div class="flex items-center">
                <div class="w-2 h-2 bg-gray-400 rounded-full mr-2"></div>
                <span>Ready to explore</span>
              </div>
            </div>
          </div>
          {% endblock %}
        </div>
      </div>
    </div>
  </body>
</html>
